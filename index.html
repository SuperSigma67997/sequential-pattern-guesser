<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pattern Intelligence Trainer</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f1220;
  color: #fff;
  margin: 0;
  padding: 20px;
  text-align: center;
}

nav button {
  margin: 6px;
  padding: 10px 18px;
  cursor: pointer;
}

.section {
  display: none;
}

.active {
  display: block;
}

h2 {
  margin-top: 10px;
}

.instructions {
  background: #1c1f3a;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  color: #ccc;
  font-size: 14px;
}

.choices button {
  margin: 8px;
  padding: 10px;
  width: 120px;
  cursor: pointer;
}

.correct {
  background-color: green;
  color: #fff;
}

.wrong {
  background-color: crimson;
  color: #fff;
}

.raven-grid {
  display: grid;
  grid-template-columns: repeat(3, 70px);
  gap: 8px;
  justify-content: center;
  margin-bottom: 20px;
}

.raven-cell {
  width: 70px;
  height: 70px;
  border: 2px solid #888;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32px;
  cursor: default;
}

.symbol {
  width: 50px;
  height: 50px;
  display: block;
}

.symbol.circle { border-radius: 50%; background: #fff; }
.symbol.triangle {
  width: 0;
  height: 0;
  border-left: 25px solid transparent;
  border-right: 25px solid transparent;
  border-bottom: 50px solid #fff;
  background: none;
}
.symbol.square { background: #fff; }

</style>
</head>
<body>

<nav>
  <button onclick="showSection('raven')">Raven Matrices</button>
</nav>

<div id="raven" class="section active">
<h2>Raven Progressive Matrix</h2>
<div class="instructions">
Observe the 3x3 grid. The bottom-right square is missing.  
Identify the rule (rotation, shape, or count) and select the correct option below.  
This trains pattern recognition, tactical reasoning, and adaptive intelligence.
</div>

<div class="raven-grid" id="ravenGrid"></div>
<div id="ravenChoices" class="choices"></div>
<h3 id="ravenRes"></h3>
</div>

<script>
function showSection(id){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ================== Raven Logic ================== */

const shapes = ['circle', 'triangle', 'square'];

let ravenMatrix = [];
let ravenCorrect = 0;

function generateRaven() {
  document.getElementById('ravenRes').textContent = '';
  ravenMatrix = [];
  const grid = document.getElementById('ravenGrid');
  grid.innerHTML = '';

  // Pick a random rule type: rotation, shape, or count
  const ruleType = Math.floor(Math.random() * 3);

  // Create symbols for top two rows
  for (let r=0; r<3; r++){
    ravenMatrix[r] = [];
    for (let c=0; c<3; c++){
      if (r === 2 && c === 2){ ravenMatrix[r][c] = null; continue; } // bottom-right empty
      if (ruleType === 0) ravenMatrix[r][c] = shapes[(c+r)%3]; // shape progression
      if (ruleType === 1) ravenMatrix[r][c] = shapes[Math.floor(Math.random()*3)]; // random with rotation
      if (ruleType === 2) ravenMatrix[r][c] = shapes[r%3]; // row-wise pattern
    }
  }

  // Render the grid
  for (let r=0;r<3;r++){
    for (let c=0;c<3;c++){
      let cell = document.createElement('div');
      cell.className = 'raven-cell';
      if (ravenMatrix[r][c]) {
        let sym = document.createElement('div');
        sym.className = 'symbol ' + ravenMatrix[r][c];
        cell.appendChild(sym);
      }
      grid.appendChild(cell);
    }
  }

  // Determine correct option for bottom-right
  // We'll keep it simple: shape that fits pattern
  ravenCorrect = Math.floor(Math.random()*4);
  const optionsDiv = document.getElementById('ravenChoices');
  optionsDiv.innerHTML = '';
  const correctShape = shapes[(2+2)%3]; // simple for now

  for (let i=0;i<4;i++){
    let btn = document.createElement('button');
    let shape = (i === ravenCorrect) ? correctShape : shapes[Math.floor(Math.random()*3)];
    btn.textContent = shape;
    btn.onclick = () => {
      if (i===ravenCorrect) {
        btn.classList.add('correct');
        document.getElementById('ravenRes').textContent = 'Correct ✅';
      } else {
        btn.classList.add('wrong');
        document.getElementById('ravenRes').textContent = 'Wrong ❌';
      }
      setTimeout(generateRaven, 1500);
    };
    optionsDiv.appendChild(btn);
  }
}

generateRaven();

</script>
</body>
</html>

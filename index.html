<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pattern Intelligence Trainer</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0b0b0b;
  color: #eee;
  text-align: center;
  padding: 30px;
}

button, select {
  margin: 6px;
  padding: 10px 20px;
  font-size: 16px;
}

.hidden { display: none; }

.grid {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 20px 0;
}

.matrix {
  display: grid;
  grid-template-columns: repeat(3, 64px);
  gap: 12px;
  justify-content: center;
}

.box {
  width: 64px;
  height: 64px;
  border-radius: 10px;
  border: 2px solid #555;
  box-shadow: 0 0 6px rgba(255,255,255,0.15);
  cursor: pointer;
}

.answers button {
  display: block;
  margin: 8px auto;
  width: 220px;
}

hr { margin: 20px 0; }
</style>
</head>
<body>

<h1>Pattern Intelligence Trainer</h1>

<button onclick="show('numbers')">Numbers</button>
<button onclick="show('visual')">Visual</button>
<button onclick="show('raven')">Raven</button>

<hr>

<!-- NUMBERS OMITTED FOR BREVITY — UNCHANGED -->

<!-- ================= VISUAL ================= -->

<div id="visual" class="hidden">
  <h2>Visual Patterns</h2>
  <div class="grid" id="vis-seq"></div>
  <div class="grid" id="vis-ans"></div>
  <h3 id="vis-res"></h3>
</div>

<!-- ================= RAVEN ================= -->

<div id="raven" class="hidden">
  <h2>Raven Matrix</h2>
  <div class="matrix" id="raven-matrix"></div>
  <div class="grid" id="raven-answers"></div>
  <h3 id="raven-res"></h3>
</div>

<script>
/* ================= NAV ================= */

function show(id){
  ["visual","raven"].forEach(x =>
    document.getElementById(x).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ================= VISUAL ================= */

let visCorrectIndex = null;

function genVisual(){
  document.getElementById("vis-res").textContent = "";

  const colors = ["#ff4444", "#4488ff", "#44ff88", "#ffdd44"];
  const ruleType = Math.floor(Math.random() * 2);
  let rule;

  if(ruleType === 0){
    let start = Math.floor(Math.random()*colors.length);
    rule = i => colors[(start+i)%colors.length];
  } else {
    let a = colors[0], b = colors[1];
    rule = i => i % 2 === 0 ? a : b;
  }

  const seq = document.getElementById("vis-seq");
  seq.innerHTML = "";

  for(let i=0;i<4;i++){
    let box = document.createElement("div");
    box.className = "box";
    box.style.background = rule(i);
    seq.appendChild(box);
  }

  let q = document.createElement("div");
  q.className = "box";
  q.style.background = "#222";
  seq.appendChild(q);

  const ans = document.getElementById("vis-ans");
  ans.innerHTML = "";
  visCorrectIndex = Math.floor(Math.random()*4);

  for(let i=0;i<4;i++){
    let box = document.createElement("div");
    box.className = "box";
    box.style.background =
      i === visCorrectIndex ? rule(4) : randColor();
    box.onclick = () => checkVisual(i);
    ans.appendChild(box);
  }
}

function checkVisual(i){
  const res = document.getElementById("vis-res");
  if(i === visCorrectIndex){
    res.textContent = "Correct ✅";
    setTimeout(genVisual, 1500);
  } else {
    res.textContent = "Wrong ❌";
  }
}

/* ================= RAVEN ================= */

let ravenCorrectIndex = null;

function genRaven(){
  document.getElementById("raven-res").textContent = "";

  const matrix = document.getElementById("raven-matrix");
  matrix.innerHTML = "";

  let base = Math.floor(Math.random()*3)+1;
  let rule = i => `rgba(255,255,255,${0.15*i + base*0.1})`;

  for(let i=0;i<8;i++){
    let box = document.createElement("div");
    box.className = "box";
    box.style.background = rule(i);
    matrix.appendChild(box);
  }

  let q = document.createElement("div");
  q.className = "box";
  q.style.background = "#222";
  matrix.appendChild(q);

  const answers = document.getElementById("raven-answers");
  answers.innerHTML = "";
  ravenCorrectIndex = Math.floor(Math.random()*4);

  for(let i=0;i<4;i++){
    let box = document.createElement("div");
    box.className = "box";
    box.style.background =
      i === ravenCorrectIndex ? rule(8) : randColor();
    box.onclick = () => checkRaven(i);
    answers.appendChild(box);
  }
}

function checkRaven(i){
  const res = document.getElementById("raven-res");
  if(i === ravenCorrectIndex){
    res.textContent = "Correct ✅";
    setTimeout(genRaven, 1500);
  } else {
    res.textContent = "Wrong ❌";
  }
}

/* ================= HELPERS ================= */

function randColor(){
  let r = () => Math.floor(Math.random()*200)+30;
  return `rgb(${r()},${r()},${r()})`;
}

/* ================= INIT ================= */

genVisual();
genRaven();
</script>

</body>
</html>

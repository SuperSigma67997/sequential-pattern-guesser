<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pattern Intelligence Trainer</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f1220;
  color: #fff;
  margin: 0;
  padding: 20px;
  text-align: center;
}

nav button {
  margin: 6px;
  padding: 10px 18px;
  cursor: pointer;
}

.section {
  display: none;
}

.active {
  display: block;
}

h2 {
  margin-top: 10px;
}

.instructions {
  background: #1c1f3a;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  color: #ccc;
  font-size: 14px;
}

.choices button {
  margin: 8px;
  padding: 10px;
  width: 120px;
  cursor: pointer;
}

.correct {
  background-color: green;
  color: #fff;
}

.wrong {
  background-color: crimson;
  color: #fff;
}

#sequence {
  font-size: 24px;
  margin: 15px 0;
}

.raven-grid {
  display: grid;
  grid-template-columns: repeat(3, 70px);
  gap: 8px;
  justify-content: center;
  margin-bottom: 20px;
}

.raven-cell {
  width: 70px;
  height: 70px;
  border: 2px solid #888;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32px;
  cursor: default;
}

.symbol {
  width: 50px;
  height: 50px;
  display: block;
}

.symbol.circle { border-radius: 50%; background: #fff; }
.symbol.triangle {
  width: 0;
  height: 0;
  border-left: 25px solid transparent;
  border-right: 25px solid transparent;
  border-bottom: 50px solid #fff;
  background: none;
}
.symbol.square { background: #fff; }

</style>
</head>

<body>

<nav>
  <button onclick="showSection('numbers')">Number Sequences</button>
  <button onclick="showSection('raven')">Raven Matrices</button>
</nav>

<!-- ================== NUMBER SEQUENCES ================== -->
<div id="numbers" class="section active">
<h2>Number Sequences</h2>

<div class="instructions">
You are shown a short number sequence with a hidden pattern.
Select the correct next number. Trains logic, pattern recognition, and working memory.
</div>

<select id="difficulty">
  <option value="easy">Easy</option>
  <option value="medium">Medium</option>
  <option value="hard">Hard</option>
</select>

<p id="sequence"></p>
<div class="choices" id="choices"></div>
</div>

<!-- ================== RAVEN MATRICES ================== -->
<div id="raven" class="section">
<h2>Raven Progressive Matrix</h2>
<div class="instructions">
3x3 grid. Bottom-right square is missing. Select the option that completes the pattern.
Trains pattern recognition, tactical reasoning, and adaptive intelligence.
</div>

<div class="raven-grid" id="ravenGrid"></div>
<div id="ravenChoices" class="choices"></div>
<h3 id="ravenRes"></h3>
</div>

<script>
/* ================= NAVIGATION ================= */
function showSection(id){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ================= NUMBER SEQUENCES ================= */
function generateSequence() {
  const diff = document.getElementById('difficulty').value;
  let seq=[], answer;
  if(diff==='easy'){ 
    let start=Math.floor(Math.random()*5)+1; seq=[start,start+2,start+4]; answer=start+6; 
  }
  if(diff==='medium'){ 
    let start=Math.floor(Math.random()*3)+2; seq=[start,start*2,start*4]; answer=start*8; 
  }
  if(diff==='hard'){ 
    seq=[2,6,12]; answer=20; 
  }

  document.getElementById('sequence').textContent = seq.join(', ')+', ?';

  let options=[answer, answer+2, answer-2, answer+4].sort(()=>Math.random()-0.5);
  const choices=document.getElementById('choices');
  choices.innerHTML='';
  options.forEach(opt=>{
    let btn=document.createElement('button');
    btn.textContent=opt;
    btn.onclick=()=>{
      btn.className = opt===answer?'correct':'wrong';
      setTimeout(generateSequence,1200);
    };
    choices.appendChild(btn);
  });
}
generateSequence();

/* ================= RAVEN MATRICES ================= */
const shapes=['circle','triangle','square'];
let ravenMatrix=[], ravenCorrect=0;

function generateRaven(){
  document.getElementById('ravenRes').textContent='';
  ravenMatrix=[];

  const grid=document.getElementById('ravenGrid');
  grid.innerHTML='';

  // Build 3x3 shape progression (row+col progression)
  for(let r=0;r<3;r++){
    ravenMatrix[r]=[];
    for(let c=0;c<3;c++){
      if(r===2 && c===2){ ravenMatrix[r][c]=null; continue; } // bottom-right missing
      ravenMatrix[r][c]=shapes[(r+c)%3];
    }
  }

  // Render grid
  for(let r=0;r<3;r++){
    for(let c=0;c<3;c++){
      let cell=document.createElement('div');
      cell.className='raven-cell';
      if(ravenMatrix[r][c]){
        let sym=document.createElement('div');
        sym.className='symbol '+ravenMatrix[r][c];
        cell.appendChild(sym);
      }
      grid.appendChild(cell);
    }
  }

  // Correct answer
  const correctShape = shapes[(2+2)%3];
  ravenCorrect=Math.floor(Math.random()*4);

  // Create unique wrong options
  let wrongOptions = shapes.filter(s=>s!==correctShape);
  wrongOptions.sort(()=>Math.random()-0.5);
  let options = wrongOptions.slice(0,3); // 3 wrong
  options.splice(ravenCorrect,0,correctShape); // insert correct at random index

  const optionsDiv=document.getElementById('ravenChoices');
  optionsDiv.innerHTML='';

  options.forEach((shape,i)=>{
    let btn=document.createElement('button');
    btn.textContent=shape;
    btn.onclick=()=>{
      if(i===ravenCorrect){ btn.classList.add('correct'); document.getElementById('ravenRes').textContent='Correct ✅'; }
      else { btn.classList.add('wrong'); document.getElementById('ravenRes').textContent='Wrong ❌'; }
      setTimeout(generateRaven,1500);
    };
    optionsDiv.appendChild(btn);
  });
}
generateRaven();
</script>
</body>
</html>
